package Lab6;

import java.util.*;

public class GraphClass implements Graph {
	Map<Vertex, Set<Vertex>> adj_list = new HashMap<Vertex, Set<Vertex>>();

	@Override
	public void add(Vertex nameVer1, Vertex[] lst) {
		Set<Vertex> listVers = Set.of(lst);
		adj_list.put(nameVer1, listVers);
	}

	@Override
	public boolean getElement(int index) {
		for (Vertex v : adj_list.keySet()) {
			if (v.index == index) {
				System.out.println("Element found " + v.name + ' ' + v.index);
				return true;
			}
		}
		System.out.println("No such element exists");
		return false;
	}

	@Override
	public boolean getElement(String name) {
		for (Vertex v : adj_list.keySet()) {
			if (v.name == name) {
				System.out.println("Element found " + v.name + ' ' + v.index);
				return true;
			}
		}
		System.out.println("No such element exists");
		return false;
	}

	
	@Override
	public void getChildren(Vertex a) {
		int[] visited = new int[adj_list.size()+1];
		StringBuilder sb = new StringBuilder();
		Queue<Vertex> q = new PriorityQueue<Vertex>();
		q.add(a);
		visited[a.index]=1;
		while (!q.isEmpty()) {
			Vertex v1 = q.remove();
			for (Vertex v : adj_list.get(v1)) {
				if (visited[v.index]==0) {
					q.add(v);
					visited[v.index] = 1;
					sb.append(v.name + " ");
					}
				}
			}		
		System.out.println(sb.toString());
	}
	
	@Override
	public boolean minWay(Vertex a, Vertex b) {
		int[] visited = new int[adj_list.size()+1];
		StringBuilder sb = new StringBuilder();
		Queue<Vertex> q = new PriorityQueue<Vertex>();
	
		q.add(a);
		sb.append(a.name + " ");
		visited[a.index] = 1;
		while (!q.isEmpty()) {
			Vertex v1 = q.remove();
			for (Vertex v : adj_list.get(v1)) {
				if (visited[v.index]==0) {
					q.add(v);
					sb.append(v.name + " ");
					visited[v.index] = 1;
					if (v.equals(b)) {
					System.out.println(sb.toString());
					return true;
					}
				}
			}
		}
		System.out.println("There are no ways");
		return true;
	}
}
